@page "/"
@using StockApp.Shared

@inject HttpClient Http

<h3>Stock Price</h3>

<input @bind="Symbol" placeholder="Enter stock symbol" />
<button @onclick="GetStockPrice">Get Price</button>

@if (stockData != null)
{
    @* <p>Service: @StockService.ServiceName</p> *@
    @* <p>Symbol: @Symbol</p> *@
    @* <p>Price: @stockPrice</p> *@
    @* <p>Data: @stockData.Symbol @stockData.Data</p> *@

    <div>
        <h4>@stockData.Symbol</h4>
        <pre>@stockData.Data</pre>
    </div>
}

@code {
    private string Symbol;
    private string stockPrice;
    private ChartResult stockData;

    private async Task GetStockPrice()
    {
        var response = await Http.GetFromJsonAsync<ChartResult>($"api/stock?symbol={Symbol}");
        // ?? new ChartResult { };
        //stockPrice = stockData?.Chart.Result.FirstOrDefault().Meta.RegularMarketPrice.ToString() ?? "N/A";
        stockData = response;
    }
}